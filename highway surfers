local Players = game:GetService('Players')
local LocalPlayer = Players.LocalPlayer
local UserInputService = game:GetService('UserInputService')

local CONFIG = {
    FakeDistance = 999999,
    FakeCloseCalls = 9999,
    FakeAvgSpeed = 999,
    FakeGems = 9999,
}

local exploitActive = false

local function CreateUI()
    local ScreenGui = Instance.new('ScreenGui')
    ScreenGui.Name = 'MoneyExploitUI'
    ScreenGui.ResetOnSpawn = false

    local MainFrame = Instance.new('Frame')
    MainFrame.Name = 'MainFrame'
    MainFrame.Size = UDim2.new(0, 250, 0, 40)
    MainFrame.Position = UDim2.new(0.5, -125, 0, 20)
    MainFrame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    MainFrame.BorderSizePixel = 1
    MainFrame.BorderColor3 = Color3.fromRGB(255, 255, 255)
    MainFrame.Parent = ScreenGui

    local Title = Instance.new('TextLabel')
    Title.Size = UDim2.new(1, -50, 0, 40)
    Title.Position = UDim2.new(0, 5, 0, 0)
    Title.BackgroundTransparency = 1
    Title.Text = 'Money Exploit'
    Title.TextColor3 = Color3.fromRGB(255, 255, 255)
    Title.Font = Enum.Font.SourceSans
    Title.TextSize = 18
    Title.TextXAlignment = Enum.TextXAlignment.Left
    Title.Parent = MainFrame

    local ToggleButton = Instance.new('TextButton')
    ToggleButton.Size = UDim2.new(0, 40, 0, 30)
    ToggleButton.Position = UDim2.new(1, -45, 0, 5)
    ToggleButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
    ToggleButton.BorderSizePixel = 1
    ToggleButton.BorderColor3 = Color3.fromRGB(255, 255, 255)
    ToggleButton.Text = 'V'
    ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    ToggleButton.Font = Enum.Font.SourceSans
    ToggleButton.TextSize = 18
    ToggleButton.Parent = MainFrame

    local ContentFrame = Instance.new('Frame')
    ContentFrame.Name = 'ContentFrame'
    ContentFrame.Size = UDim2.new(1, 0, 0, 0)
    ContentFrame.Position = UDim2.new(0, 0, 0, 40)
    ContentFrame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    ContentFrame.BorderSizePixel = 1
    ContentFrame.BorderColor3 = Color3.fromRGB(255, 255, 255)
    ContentFrame.Visible = false
    ContentFrame.Parent = MainFrame

    local inputs = {
        { Name = 'Distance', Var = 'FakeDistance' },
        { Name = 'Close Calls', Var = 'FakeCloseCalls' },
        { Name = 'Avg Speed', Var = 'FakeAvgSpeed' },
        { Name = 'Gems', Var = 'FakeGems' },
    }

    local inputBoxes = {}
    local yPos = 10

    for _, inputData in ipairs(inputs) do
        local Label = Instance.new('TextLabel')
        Label.Size = UDim2.new(1, -20, 0, 20)
        Label.Position = UDim2.new(0, 10, 0, yPos)
        Label.BackgroundTransparency = 1
        Label.Text = inputData.Name
        Label.TextColor3 = Color3.fromRGB(255, 255, 255)
        Label.Font = Enum.Font.SourceSans
        Label.TextSize = 16
        Label.TextXAlignment = Enum.TextXAlignment.Left
        Label.Parent = ContentFrame

        local InputBox = Instance.new('TextBox')
        InputBox.Name = inputData.Name
        InputBox.Size = UDim2.new(1, -20, 0, 30)
        InputBox.Position = UDim2.new(0, 10, 0, yPos + 20)
        InputBox.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
        InputBox.BorderSizePixel = 1
        InputBox.BorderColor3 = Color3.fromRGB(255, 255, 255)
        InputBox.Text = tostring(CONFIG[inputData.Var])
        InputBox.TextColor3 = Color3.fromRGB(255, 255, 255)
        InputBox.Font = Enum.Font.SourceSans
        InputBox.TextSize = 16
        InputBox.ClearTextOnFocus = false
        InputBox.Parent = ContentFrame

        inputBoxes[inputData.Var] = InputBox
        yPos = yPos + 55
    end

    local ActivateButton = Instance.new('TextButton')
    ActivateButton.Size = UDim2.new(1, -20, 0, 35)
    ActivateButton.Position = UDim2.new(0, 10, 0, yPos)
    ActivateButton.BackgroundColor3 = Color3.fromRGB(0, 150, 0)
    ActivateButton.BorderSizePixel = 1
    ActivateButton.BorderColor3 = Color3.fromRGB(255, 255, 255)
    ActivateButton.Text = 'ACTIVATE'
    ActivateButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    ActivateButton.Font = Enum.Font.SourceSansBold
    ActivateButton.TextSize = 18
    ActivateButton.Parent = ContentFrame

    yPos = yPos + 45

    local StatusLabel = Instance.new('TextLabel')
    StatusLabel.Size = UDim2.new(1, -20, 0, 25)
    StatusLabel.Position = UDim2.new(0, 10, 0, yPos)
    StatusLabel.BackgroundTransparency = 1
    StatusLabel.Text = 'Status: Inactive'
    StatusLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
    StatusLabel.Font = Enum.Font.SourceSans
    StatusLabel.TextSize = 16
    StatusLabel.Parent = ContentFrame

    yPos = yPos + 30

    local Instructions = Instance.new('TextLabel')
    Instructions.Size = UDim2.new(1, -20, 0, 100)
    Instructions.Position = UDim2.new(0, 10, 0, yPos)
    Instructions.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
    Instructions.BorderSizePixel = 1
    Instructions.BorderColor3 = Color3.fromRGB(255, 255, 255)
    Instructions.Text =
        'Instructions:\n1. Set values\n2. Click ACTIVATE\n3. Play and die\n4. Get rewards'
    Instructions.TextColor3 = Color3.fromRGB(255, 255, 255)
    Instructions.Font = Enum.Font.SourceSans
    Instructions.TextSize = 15
    Instructions.TextYAlignment = Enum.TextYAlignment.Top
    Instructions.TextWrapped = true
    Instructions.Parent = ContentFrame

    yPos = yPos + 110

    local isExpanded = false
    ToggleButton.Activated:Connect(function()
        isExpanded = not isExpanded

        if isExpanded then
            ContentFrame.Visible = true
            ContentFrame.Size = UDim2.new(1, 0, 0, yPos)
            MainFrame.Size = UDim2.new(0, 250, 0, 40 + yPos)
            ToggleButton.Text = '^'
        else
            MainFrame.Size = UDim2.new(0, 250, 0, 40)
            ContentFrame.Size = UDim2.new(1, 0, 0, 0)
            ToggleButton.Text = 'V'
            ContentFrame.Visible = false
        end
    end)

    ActivateButton.Activated:Connect(function()
        if not exploitActive then
            CONFIG.FakeDistance = tonumber(inputBoxes['FakeDistance'].Text)
                or CONFIG.FakeDistance
            CONFIG.FakeCloseCalls = tonumber(inputBoxes['FakeCloseCalls'].Text)
                or CONFIG.FakeCloseCalls
            CONFIG.FakeAvgSpeed = tonumber(inputBoxes['FakeAvgSpeed'].Text)
                or CONFIG.FakeAvgSpeed
            CONFIG.FakeGems = tonumber(inputBoxes['FakeGems'].Text)
                or CONFIG.FakeGems

            ExploitRewards()
            exploitActive = true
            ActivateButton.BackgroundColor3 = Color3.fromRGB(150, 0, 0)
            ActivateButton.Text = 'DEACTIVATE'
            StatusLabel.Text = 'Status: Active'
            StatusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
        else
            exploitActive = false
            ActivateButton.BackgroundColor3 = Color3.fromRGB(0, 150, 0)
            ActivateButton.Text = 'ACTIVATE'
            StatusLabel.Text = 'Status: Inactive'
            StatusLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
        end
    end)

    local dragging = false
    local dragInput, dragStart, startPos

    local function update(input)
        local delta = input.Position - dragStart
        MainFrame.Position = UDim2.new(
            startPos.X.Scale,
            startPos.X.Offset + delta.X,
            startPos.Y.Scale,
            startPos.Y.Offset + delta.Y
        )
    end

    MainFrame.InputBegan:Connect(function(input)
        if
            input.UserInputType == Enum.UserInputType.MouseButton1
            or input.UserInputType == Enum.UserInputType.Touch
        then
            dragging = true
            dragStart = input.Position
            startPos = MainFrame.Position

            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)

    MainFrame.InputChanged:Connect(function(input)
        if
            input.UserInputType == Enum.UserInputType.MouseMovement
            or input.UserInputType == Enum.UserInputType.Touch
        then
            dragInput = input
        end
    end)

    UserInputService.InputChanged:Connect(function(input)
        if input == dragInput and dragging then
            update(input)
        end
    end)

    ScreenGui.Parent = LocalPlayer.PlayerGui
end

local originalNamecall = nil

function ExploitRewards()
    local ReplicatedStorage = game:GetService('ReplicatedStorage')
    local remotes = ReplicatedStorage:FindFirstChild('Remotes')
    if not remotes then
        return
    end

    local generalActions = remotes:FindFirstChild('GeneralActions')
    if not generalActions then
        return
    end

    if not originalNamecall then
        originalNamecall = hookmetamethod(
            game,
            '__namecall',
            function(self, ...)
                local method = getnamecallmethod()
                local args = { ... }

                if
                    method == 'FireServer'
                    and self == generalActions
                    and exploitActive
                then
                    local action = args[1]
                    local data = args[2]

                    if action == 'EndData' and data and data.Result then
                        data.Result.Distance = CONFIG.FakeDistance
                        data.Result.CloseCalls = CONFIG.FakeCloseCalls
                        data.Result.AvgSpeed = CONFIG.FakeAvgSpeed
                        data.Result.Coins = 99999
                    end
                end

                return originalNamecall(self, ...)
            end
        )
    end
end

CreateUI()

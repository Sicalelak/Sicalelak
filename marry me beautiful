--theconfigbaby
local config = AimbotConfig

-- Variables
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local Camera = workspace.CurrentCamera
local TargetModelName = "Ball" -- The name of the model
local TargetPartName = "BallPart" -- The name of the part inside the model
local AimbotEnabled = false
local SmoothSpeed = config.SmoothSpeed

-- FOV Circle
local FOVCircle = Drawing.new("Circle")
FOVCircle.Color = config.FOVCircle.Color
FOVCircle.Thickness = config.FOVCircle.Thickness
FOVCircle.Radius = config.FOVCircle.Radius
FOVCircle.Transparency = config.FOVCircle.Transparency
FOVCircle.Visible = config.FOVCircle.Visible
FOVCircle.Filled = config.FOVCircle.Filled

-- Function to find the closest valid target within the FOV
local function FindClosestTarget()
    local closestTarget = nil
    local closestDistance = math.huge -- Start with a very large distance
    local mouseLocation = UserInputService:GetMouseLocation()

    for _, model in ipairs(workspace:GetChildren()) do
        if model.Name == TargetModelName and model:IsA("Model") then
            local part = model:FindFirstChild(TargetPartName)
            if part and part:IsA("BasePart") then
                local screenPosition, onScreen = Camera:WorldToViewportPoint(part.Position)
                if onScreen then
                    local distance = (Vector2.new(screenPosition.X, screenPosition.Y) - mouseLocation).Magnitude
                    if distance <= FOVCircle.Radius and distance < closestDistance then
                        closestTarget = part
                        closestDistance = distance
                    end
                end
            end
        end
    end

    return closestTarget
end

-- Smoothly move the camera towards the target
local function SmoothAimAt(target)
    if target then
        local currentCFrame = Camera.CFrame
        local targetCFrame = CFrame.new(currentCFrame.Position, target.Position)
        Camera.CFrame = currentCFrame:Lerp(targetCFrame, SmoothSpeed)
    end
end

-- Input handling
UserInputService.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton2 then
        AimbotEnabled = true
    end
end)

UserInputService.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton2 then
        AimbotEnabled = false
    end
end)

-- Update FOV Circle position
RunService.RenderStepped:Connect(function()
    local mouseLocation = UserInputService:GetMouseLocation()
    FOVCircle.Position = Vector2.new(mouseLocation.X, mouseLocation.Y)
end)

-- Main loop
RunService.RenderStepped:Connect(function()
    if AimbotEnabled then
        local closestTarget = FindClosestTarget()
        if closestTarget then
            SmoothAimAt(closestTarget)
        end
    end
end)
